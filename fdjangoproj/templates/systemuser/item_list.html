{% load static %}
{% load tz %}
{% include "partials/header.html" %}

<body class="sb-nav-fixed">
    {% include "partials/navbar.html" %}

    <div id="layoutSidenav">
        {% include "partials/sidebar.html" %}
        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid px-4">
                    <h1 class="mt-4">Item List</h1>
                    <ol class="breadcrumb mb-4">
                        <li class="breadcrumb-item active">Showing all items in the Inventory</li>
                    </ol>

                    <div class="mb-3">
                        <a href="{% url 'add_item' %}" class="btn btn-primary">Add New Item</a>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            <i class="fas fa-table me-1"></i>
                            DataTable Example
                        </div>
                        <div class="card-body">
                            <table id="datatablesSimple">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Description</th>
                                        <th>Category</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                        <th>Supplier</th>
                                        <th>Reorder Level</th>
                                        <th>Maximum Level</th>
                                        <th>Date Added</th>
                                        <th>Date Modified</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tfoot>
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Description</th>
                                        <th>Category</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                        <th>Supplier</th>
                                        <th>Reorder Level</th>
                                        <th>Maximum Level</th>
                                        <th>Date Added</th>
                                        <th>Date Modified</th>
                                        <th>Actions</th>
                                    </tr>
                                </tfoot>
                                <tbody>
                                    {% for item in items %}
                                    <tr>
                                        <td>{{ item.item_id }}</td>
                                        <td>{{ item.item_name }}</td>
                                        <td>{{ item.description }}</td>
                                        <td>{{ item.category }}</td>
                                        <td>{{ item.quantity }}</td>
                                        <td>{{ item.price }}</td>
                                        <td>{{ item.supplier }}</td>
                                        <td>{{ item.reorder_level }}</td>
                                        <td>{{ item.maximum_level }}</td>
                                        <td>{{ item.date_added|localtime|date:"M d, Y H:i" }}</td>
                                        <td>{{ item.date_modified|localtime|date:"M d, Y H:i" }}</td>
                                        <td>
                                            <a href="{% url 'edit_item' item.item_id %}" class="btn btn-sm btn-warning">Edit</a>
                                            <form action="{% url 'delete_item' item.item_id %}" method="post" style="display:inline;">
                                                {% csrf_token %}
                                                <button type="submit" class="btn btn-sm btn-danger"
                                                    onclick="return confirm('Are you sure you want to delete this item?');">
                                                    Delete
                                                </button>
                                            </form>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </main>

            {% include "partials/footer.html" %}
        </div>
    </div>
    {% include "partials/scripts.html" %}
</body>
</html>

